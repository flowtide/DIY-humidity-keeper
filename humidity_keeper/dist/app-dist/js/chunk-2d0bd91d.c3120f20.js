(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd91d"],{"2d0e":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"device-view-container"},[e.form.isDisabled?t("div",[t("centered-loader")],1):e._e(),t("b-form",{attrs:{disabled:e.form.isDisabled},on:{submit:e.onDeviceSave}},[t("div",{staticClass:"m-3"},[e.isEditMode?t("h4",[t("b-icon",{attrs:{icon:"gear-fill","aria-hidden":"true"}}),e._v(" 장치 수정")],1):e._e(),e.isEditMode?e._e():t("h4",[t("b-icon",{attrs:{icon:"gear-fill","aria-hidden":"true"}}),e._v(" 장치 추가")],1)]),t("b-card",{attrs:{"bg-variant":"dark"}},[t("div",[t("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{prepend:"이 름"}},[t("b-form-input",{attrs:{disabled:e.form.isDisabled,required:""},model:{value:e.form.device.name,callback:function(r){e.$set(e.form.device,"name",r)},expression:"form.device.name"}})],1),t("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{prepend:"설 명"}},[t("b-form-input",{attrs:{disabled:e.form.isDisabled},model:{value:e.form.device.desc,callback:function(r){e.$set(e.form.device,"desc",r)},expression:"form.device.desc"}})],1),t("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{prepend:"장치 타입"}},[t("b-form-select",{attrs:{options:e.deviceTypes},model:{value:e.form.device.type,callback:function(r){e.$set(e.form.device,"type",r)},expression:"form.device.type"}})],1),t("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{prepend:"장치 주소"}},[t("b-form-input",{attrs:{disabled:e.form.isDisabled},model:{value:e.form.device.address,callback:function(r){e.$set(e.form.device,"address",r)},expression:"form.device.address"}})],1),t("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{prepend:"설치 일자"}},[t("b-form-datepicker",{model:{value:e.form.device.registerAt,callback:function(r){e.$set(e.form.device,"registerAt",r)},expression:"form.device.registerAt"}})],1)],1),t("hr"),t("div",[t("b-button",{attrs:{variant:"primary"},on:{click:e.onDeviceSave}},[e._v(" 저장 ")]),e._v(" "),e.isEditMode?t("b-button",{attrs:{variant:"danger"},on:{click:e.onDeviceDelete}},[e._v(" 삭제 ")]):e._e()],1)])],1)],1)},a=[],i=(t("0d03"),t("b0c0"),t("96cf"),t("1da1")),d=(t("c1df"),t("2ef0")),o=t.n(d),n={name:"DeviceEdit",data:function(){return{device:{name:"",desc:"",type:0,address:"",registerAt:""},isEditMode:!1,form:{device:{name:"",desc:"",type:0,address:"",registerAt:""},isDisabled:!1},deviceTypes:[{text:"센서",value:0},{text:"액추에이터",value:1}]}},computed:{},methods:{onDeviceSave:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.preventDefault(),r.form.isDisabled=!0,t.prev=2,!r.isEditMode){t.next=10;break}return t.next=6,r.axios.put("/api/v1/devices/update",{device:r.form.device});case 6:s=t.sent,s.data.error?alert("Update error: "+s.data.error.message):r.$router.back(),t.next=14;break;case 10:return t.next=12,r.axios.post("/api/v1/devices/add",{device:r.form.device});case 12:a=t.sent,a.data.error?alert("Update error: "+a.data.error.message):r.$router.back();case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](2),console.log(t.t0),alert("Update error: "+t.t0.message);case 20:r.form.isDisabled=!1;case 21:case"end":return t.stop()}}),t,null,[[2,16]])})))()},onDeviceDelete:function(e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),r.form.isDisabled=!0,t.prev=2,t.next=5,r.axios["delete"]("/api/v1/devices/delete/"+r.device.id);case 5:s=t.sent,s.data.error?alert("Delete error: "+s.data.error.message):r.$router.back(),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0),alert("Delete error: "+t.t0.message);case 13:r.form.isDisabled=!1;case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},mounted:function(){console.log("findDevice:",this.$route.params._id),"new"==this.$route.params._id?(this.form.device.name="",this.form.device.desc="",this.form.device.registerAt=new Date):(this.device=this.$store.getters.findDevice(this.$route.params._id),this.form.device=o.a.clone(this.device),this.isEditMode=!0)}},c=n,m=t("2877"),l=Object(m["a"])(c,s,a,!1,null,null,null);r["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0bd91d.c3120f20.js.map