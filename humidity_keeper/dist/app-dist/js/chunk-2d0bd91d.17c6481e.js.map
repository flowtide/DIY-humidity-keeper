{"version":3,"sources":["webpack:///./src/views/DeviceEdit.vue?515a","webpack:///src/views/DeviceEdit.vue","webpack:///./src/views/DeviceEdit.vue?f855","webpack:///./src/views/DeviceEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","form","_e","attrs","isDisabled","on","onDeviceSave","_v","isEditMode","model","value","device","callback","$$v","$set","expression","deviceTypes","onDeviceDelete","staticRenderFns","name","data","desc","type","address","registerAt","computed","methods","mounted","console","log","$route","params","_id","Date","$store","getters","findDevice","component"],"mappings":"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","file":"js/chunk-2d0bd91d.17c6481e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"device-view-container\"},[(_vm.form.isDisabled)?_c('div',[_c('centered-loader')],1):_vm._e(),_c('b-form',{attrs:{\"disabled\":_vm.form.isDisabled},on:{\"submit\":_vm.onDeviceSave}},[_c('div',{staticClass:\"m-3\"},[(_vm.isEditMode)?_c('h4',[_c('b-icon',{attrs:{\"icon\":\"gear-fill\",\"aria-hidden\":\"true\"}}),_vm._v(\" 장치 수정\")],1):_vm._e(),(!_vm.isEditMode)?_c('h4',[_c('b-icon',{attrs:{\"icon\":\"gear-fill\",\"aria-hidden\":\"true\"}}),_vm._v(\" 장치 추가\")],1):_vm._e()]),_c('b-card',{attrs:{\"bg-variant\":\"dark\"}},[_c('div',[_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"이 름\"}},[_c('b-form-input',{attrs:{\"disabled\":_vm.form.isDisabled,\"required\":\"\"},model:{value:(_vm.form.device.name),callback:function ($$v) {_vm.$set(_vm.form.device, \"name\", $$v)},expression:\"form.device.name\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"설 명\"}},[_c('b-form-input',{attrs:{\"disabled\":_vm.form.isDisabled},model:{value:(_vm.form.device.desc),callback:function ($$v) {_vm.$set(_vm.form.device, \"desc\", $$v)},expression:\"form.device.desc\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"장치 타입\"}},[_c('b-form-select',{attrs:{\"options\":_vm.deviceTypes},model:{value:(_vm.form.device.type),callback:function ($$v) {_vm.$set(_vm.form.device, \"type\", $$v)},expression:\"form.device.type\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"장치 주소\"}},[_c('b-form-input',{attrs:{\"disabled\":_vm.form.isDisabled},model:{value:(_vm.form.device.address),callback:function ($$v) {_vm.$set(_vm.form.device, \"address\", $$v)},expression:\"form.device.address\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"설치 일자\"}},[_c('b-form-datepicker',{model:{value:(_vm.form.device.registerAt),callback:function ($$v) {_vm.$set(_vm.form.device, \"registerAt\", $$v)},expression:\"form.device.registerAt\"}})],1)],1),_c('hr'),_c('div',[_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.onDeviceSave}},[_vm._v(\" 저장 \")]),_vm._v(\" \"),(_vm.isEditMode)?_c('b-button',{attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.onDeviceDelete}},[_vm._v(\" 삭제 \")]):_vm._e()],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"device-view-container\">\r\n    <div v-if=\"form.isDisabled\">\r\n      <centered-loader />\r\n    </div>\r\n\r\n    <b-form @submit=\"onDeviceSave\" :disabled=\"form.isDisabled\">\r\n      <div class=\"m-3\">\r\n        <h4 v-if=\"isEditMode\"> <b-icon icon='gear-fill' aria-hidden='true'></b-icon> 장치 수정</h4>\r\n        <h4 v-if=\"!isEditMode\"> <b-icon icon='gear-fill' aria-hidden='true'></b-icon> 장치 추가</h4>\r\n      </div>\r\n\r\n      <b-card bg-variant=\"dark\" >\r\n\r\n        <div>\r\n          <b-input-group prepend=\"이 름\" class=\"mb-2 mr-sm-2 mb-sm-2\">\r\n            <b-form-input\r\n            v-model=\"form.device.name\" :disabled=\"form.isDisabled\"\r\n            required\r\n            >\r\n            </b-form-input>\r\n          </b-input-group>\r\n          <b-input-group prepend=\"설 명\" class=\"mb-2 mr-sm-2 mb-sm-2\">\r\n            <b-form-input\r\n            v-model=\"form.device.desc\" :disabled=\"form.isDisabled\"\r\n            >\r\n            </b-form-input>\r\n          </b-input-group>\r\n\r\n          <b-input-group prepend=\"장치 타입\" class=\"mb-2 mr-sm-2 mb-sm-2\">\r\n            <b-form-select\r\n              v-model=\"form.device.type\"\r\n              :options=\"deviceTypes\"\r\n            ></b-form-select>\r\n          </b-input-group>\r\n\r\n          <b-input-group prepend=\"장치 주소\" class=\"mb-2 mr-sm-2 mb-sm-2\">\r\n            <b-form-input\r\n            v-model=\"form.device.address\" :disabled=\"form.isDisabled\"\r\n            >\r\n            </b-form-input>\r\n          </b-input-group>\r\n          <b-input-group prepend=\"설치 일자\" class=\"mb-2 mr-sm-2 mb-sm-2\">\r\n            <b-form-datepicker v-model=\"form.device.registerAt\"></b-form-datepicker>\r\n          </b-input-group>\r\n        </div>\r\n        <hr>\r\n        <div>\r\n          <b-button v-on:click=\"onDeviceSave\" variant=\"primary\">\r\n            저장\r\n          </b-button>\r\n          &nbsp;\r\n          <b-button v-on:click=\"onDeviceDelete\" variant=\"danger\" v-if='isEditMode'>\r\n            삭제\r\n          </b-button>\r\n        </div>\r\n      </b-card>\r\n\r\n    </b-form>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport _ from 'lodash'\r\n\r\nexport default {\r\n  name: 'DeviceEdit',\r\n\r\n  data () {\r\n    return {\r\n      device: {\r\n        name: '',\r\n        desc: '',\r\n        type: 0,\r\n        address: '',\r\n        registerAt: '',\r\n      },\r\n      isEditMode: false,\r\n      form: {\r\n        device: {\r\n          name: '',\r\n          desc: '',\r\n          type: 0,\r\n          address: '',\r\n          registerAt: ''\r\n        },\r\n        isDisabled: false\r\n      },\r\n      deviceTypes: [{ text: '센서', value: 0 }, { text: '액추에이터', value: 1 }],\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    async onDeviceSave(evt) {\r\n      evt.preventDefault()\r\n      this.form.isDisabled = true\r\n      try {\r\n        if (this.isEditMode) {\r\n          let res = await this.axios.put('/api/v1/devices/update', { device: this.form.device })\r\n          if (res.data.error) {\r\n            alert('Update error: ' + res.data.error.message)\r\n          } else {\r\n            this.$router.back()\r\n          }\r\n        } else {\r\n          let res = await this.axios.post('/api/v1/devices/add', { device: this.form.device })\r\n          if (res.data.error) {\r\n            alert('Update error: ' + res.data.error.message)\r\n          } else {\r\n            this.$router.back()\r\n          }\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.log(error)\r\n        alert('Update error: ' + error.message)\r\n      }\r\n      this.form.isDisabled = false\r\n    },\r\n    async onDeviceDelete(evt) {\r\n      evt.preventDefault()\r\n      this.form.isDisabled = true\r\n      try {\r\n        let res = await this.axios.delete('/api/v1/devices/delete/' + this.device.id)\r\n        if (res.data.error) {\r\n          alert('Delete error: ' + res.data.error.message)\r\n        } else {\r\n          this.$router.back()\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.log(error)\r\n        alert('Delete error: ' + error.message)\r\n      }\r\n      this.form.isDisabled = false\r\n    },\r\n  },\r\n  mounted () {\r\n    console.log('findDevice:', this.$route.params._id)\r\n    if (this.$route.params._id == 'new') {\r\n      this.form.device.name = ''\r\n      this.form.device.desc = ''\r\n      this.form.device.registerAt = new Date()\r\n    }\r\n    else {\r\n      this.device = this.$store.getters.findDevice(this.$route.params._id)\r\n      this.form.device = _.clone(this.device)\r\n      this.isEditMode = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DeviceEdit.vue?vue&type=template&id=629ad978&\"\nimport script from \"./DeviceEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DeviceEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}