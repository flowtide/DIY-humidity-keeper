{"version":3,"sources":["webpack:///./src/views/DeviceEdit.vue?a79d","webpack:///src/views/DeviceEdit.vue","webpack:///./src/views/DeviceEdit.vue?f855","webpack:///./src/views/DeviceEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","form","_e","attrs","isDisabled","on","onDeviceSave","_v","isEditMode","model","value","device","callback","$$v","$set","expression","deviceTypes","onDeviceDelete","staticRenderFns","name","data","desc","type","address","registerAt","computed","methods","mounted","console","log","$route","params","_id","Date","$store","getters","findDevice","component"],"mappings":"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","file":"js/chunk-2d0bd91d.c3120f20.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"device-view-container\"},[(_vm.form.isDisabled)?_c('div',[_c('centered-loader')],1):_vm._e(),_c('b-form',{attrs:{\"disabled\":_vm.form.isDisabled},on:{\"submit\":_vm.onDeviceSave}},[_c('div',{staticClass:\"m-3\"},[(_vm.isEditMode)?_c('h4',[_c('b-icon',{attrs:{\"icon\":\"gear-fill\",\"aria-hidden\":\"true\"}}),_vm._v(\" 장치 수정\")],1):_vm._e(),(!_vm.isEditMode)?_c('h4',[_c('b-icon',{attrs:{\"icon\":\"gear-fill\",\"aria-hidden\":\"true\"}}),_vm._v(\" 장치 추가\")],1):_vm._e()]),_c('b-card',{attrs:{\"bg-variant\":\"dark\"}},[_c('div',[_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"이 름\"}},[_c('b-form-input',{attrs:{\"disabled\":_vm.form.isDisabled,\"required\":\"\"},model:{value:(_vm.form.device.name),callback:function ($$v) {_vm.$set(_vm.form.device, \"name\", $$v)},expression:\"form.device.name\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"설 명\"}},[_c('b-form-input',{attrs:{\"disabled\":_vm.form.isDisabled},model:{value:(_vm.form.device.desc),callback:function ($$v) {_vm.$set(_vm.form.device, \"desc\", $$v)},expression:\"form.device.desc\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"장치 타입\"}},[_c('b-form-select',{attrs:{\"options\":_vm.deviceTypes},model:{value:(_vm.form.device.type),callback:function ($$v) {_vm.$set(_vm.form.device, \"type\", $$v)},expression:\"form.device.type\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"장치 주소\"}},[_c('b-form-input',{attrs:{\"disabled\":_vm.form.isDisabled},model:{value:(_vm.form.device.address),callback:function ($$v) {_vm.$set(_vm.form.device, \"address\", $$v)},expression:\"form.device.address\"}})],1),_c('b-input-group',{staticClass:\"mb-2 mr-sm-2 mb-sm-2\",attrs:{\"prepend\":\"설치 일자\"}},[_c('b-form-datepicker',{model:{value:(_vm.form.device.registerAt),callback:function ($$v) {_vm.$set(_vm.form.device, \"registerAt\", $$v)},expression:\"form.device.registerAt\"}})],1)],1),_c('hr'),_c('div',[_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.onDeviceSave}},[_vm._v(\" 저장 \")]),_vm._v(\" \"),(_vm.isEditMode)?_c('b-button',{attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.onDeviceDelete}},[_vm._v(\" 삭제 \")]):_vm._e()],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"device-view-container\">\n    <div v-if=\"form.isDisabled\">\n      <centered-loader />\n    </div>\n\n    <b-form @submit=\"onDeviceSave\" :disabled=\"form.isDisabled\">\n      <div class=\"m-3\">\n        <h4 v-if=\"isEditMode\"> <b-icon icon='gear-fill' aria-hidden='true'></b-icon> 장치 수정</h4>\n        <h4 v-if=\"!isEditMode\"> <b-icon icon='gear-fill' aria-hidden='true'></b-icon> 장치 추가</h4>\n      </div>\n\n      <b-card bg-variant=\"dark\" >\n\n        <div>\n          <b-input-group prepend=\"이 름\" class=\"mb-2 mr-sm-2 mb-sm-2\">\n            <b-form-input\n            v-model=\"form.device.name\" :disabled=\"form.isDisabled\"\n            required\n            >\n            </b-form-input>\n          </b-input-group>\n          <b-input-group prepend=\"설 명\" class=\"mb-2 mr-sm-2 mb-sm-2\">\n            <b-form-input\n            v-model=\"form.device.desc\" :disabled=\"form.isDisabled\"\n            >\n            </b-form-input>\n          </b-input-group>\n\n          <b-input-group prepend=\"장치 타입\" class=\"mb-2 mr-sm-2 mb-sm-2\">\n            <b-form-select\n              v-model=\"form.device.type\"\n              :options=\"deviceTypes\"\n            ></b-form-select>\n          </b-input-group>\n\n          <b-input-group prepend=\"장치 주소\" class=\"mb-2 mr-sm-2 mb-sm-2\">\n            <b-form-input\n            v-model=\"form.device.address\" :disabled=\"form.isDisabled\"\n            >\n            </b-form-input>\n          </b-input-group>\n          <b-input-group prepend=\"설치 일자\" class=\"mb-2 mr-sm-2 mb-sm-2\">\n            <b-form-datepicker v-model=\"form.device.registerAt\"></b-form-datepicker>\n          </b-input-group>\n        </div>\n        <hr>\n        <div>\n          <b-button v-on:click=\"onDeviceSave\" variant=\"primary\">\n            저장\n          </b-button>\n          &nbsp;\n          <b-button v-on:click=\"onDeviceDelete\" variant=\"danger\" v-if='isEditMode'>\n            삭제\n          </b-button>\n        </div>\n      </b-card>\n\n    </b-form>\n\n  </div>\n</template>\n\n<script>\nimport moment from 'moment'\nimport _ from 'lodash'\n\nexport default {\n  name: 'DeviceEdit',\n\n  data () {\n    return {\n      device: {\n        name: '',\n        desc: '',\n        type: 0,\n        address: '',\n        registerAt: '',\n      },\n      isEditMode: false,\n      form: {\n        device: {\n          name: '',\n          desc: '',\n          type: 0,\n          address: '',\n          registerAt: ''\n        },\n        isDisabled: false\n      },\n      deviceTypes: [{ text: '센서', value: 0 }, { text: '액추에이터', value: 1 }],\n    }\n  },\n  computed: {\n  },\n  methods: {\n    async onDeviceSave(evt) {\n      evt.preventDefault()\n      this.form.isDisabled = true\n      try {\n        if (this.isEditMode) {\n          let res = await this.axios.put('/api/v1/devices/update', { device: this.form.device })\n          if (res.data.error) {\n            alert('Update error: ' + res.data.error.message)\n          } else {\n            this.$router.back()\n          }\n        } else {\n          let res = await this.axios.post('/api/v1/devices/add', { device: this.form.device })\n          if (res.data.error) {\n            alert('Update error: ' + res.data.error.message)\n          } else {\n            this.$router.back()\n          }\n        }\n      }\n      catch (error) {\n        console.log(error)\n        alert('Update error: ' + error.message)\n      }\n      this.form.isDisabled = false\n    },\n    async onDeviceDelete(evt) {\n      evt.preventDefault()\n      this.form.isDisabled = true\n      try {\n        let res = await this.axios.delete('/api/v1/devices/delete/' + this.device.id)\n        if (res.data.error) {\n          alert('Delete error: ' + res.data.error.message)\n        } else {\n          this.$router.back()\n        }\n      }\n      catch (error) {\n        console.log(error)\n        alert('Delete error: ' + error.message)\n      }\n      this.form.isDisabled = false\n    },\n  },\n  mounted () {\n    console.log('findDevice:', this.$route.params._id)\n    if (this.$route.params._id == 'new') {\n      this.form.device.name = ''\n      this.form.device.desc = ''\n      this.form.device.registerAt = new Date()\n    }\n    else {\n      this.device = this.$store.getters.findDevice(this.$route.params._id)\n      this.form.device = _.clone(this.device)\n      this.isEditMode = true\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DeviceEdit.vue?vue&type=template&id=1b491ff1&\"\nimport script from \"./DeviceEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DeviceEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}